@model EDIS.Models.RepairModels.TicketDtlModel

@{
    Layout = "~/Views/Shared/_PassedLayout.cshtml";
    ViewBag.Title = "刪除/發票明細";
}

<h2>刪除</h2>

<h3>確定刪除此明細?</h3>
<div>
    <h4>發票明細</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.ObjName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ObjName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Qty)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Qty)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Unite)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Unite)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Price)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Price)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Cost)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Cost)
        </dd>

    </dl>

    <form data-ajax="true" data-ajax-method="POST"
          data-ajax-begin="$.Toast.showToast({
          'title':'作業進行中，請稍待...',
          'icon':'loading',
          'duration':0
          })"
          data-ajax-failure="onFailed"
          data-ajax-success="onSuccess()">

        <div class="form-actions no-color">
            <input type="submit" value="刪除" class="btn btn-default" />
            <a class="btn btn-primary" onclick="window.close();">取消</a>
        </div>
    </form>
</div>

<script>
    var onFailed = function (data) {
        alert(data.responseText);
        $.Toast.hideToast();
    };
    function onSuccess() {
        alert("刪除成功!");
        $.Toast.hideToast();
        if (window.opener != null) {
            window.opener.location = "javascript:ReSubmit();";
            window.close();
        }
    }
</script>
